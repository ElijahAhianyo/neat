# Neat Data

[_Documentation generated by Documatic_](https://www.documatic.com)

<!---Documatic-section-Codebase Structure-start--->
## Codebase Structure

<!---Documatic-block-system_architecture-start--->
```mermaid
None
```
<!---Documatic-block-system_architecture-end--->

# #
<!---Documatic-section-Codebase Structure-end--->

<!---Documatic-section-neat.data.semantics_to_points-start--->
## [neat.data.semantics_to_points](3-neat_data.md#neat.data.semantics_to_points)

<!---Documatic-section-semantics_to_points-start--->
```mermaid
flowchart LR
neat.data.semantics_to_points-->neat.data.transform_2d_points
```

### Object Calls

* [neat.data.transform_2d_points](3-neat_data.md#neat.data.transform_2d_points)

<!---Documatic-block-neat.data.semantics_to_points-start--->
<details>
	<summary><code>neat.data.semantics_to_points</code> code snippet</summary>

```python
def semantics_to_points(full_semantics, i, seq_theta, seq_x, seq_y, ego_theta, ego_x, ego_y, num_class, converter, crop, axis, resolution, offset):
    converter = np.uint8(converter)
    full_semantics = converter[full_semantics]
    points_all = []
    for k in range(num_class):
        points_k = np.array(np.where(full_semantics == k))
        points_k[0] = i
        points_k[1] = (points_k[1] - crop // 2) * resolution
        points_k[2] = (points_k[2] - crop // 2) * resolution
        points_k = np.array(points_k[::-1, :]).T
        if points_k.shape[0] > 0:
            points_k = transform_2d_points(points_k, -np.pi / 2 - seq_theta[i], seq_x[i], seq_y[i], -np.pi / 2 - ego_theta, ego_x, ego_y)
        points_k = points_k[abs(points_k[:, 0]) < axis / 2 * resolution]
        points_k[:, 1] = points_k[:, 1] + offset * resolution
        points_k = points_k[abs(points_k[:, 1]) < axis / 2 * resolution]
        points_all.append(points_k)
    return points_all
```
</details>
<!---Documatic-block-neat.data.semantics_to_points-end--->
<!---Documatic-section-semantics_to_points-end--->

# #
<!---Documatic-section-neat.data.semantics_to_points-end--->

<!---Documatic-section-neat.data.scale_and_crop_image-start--->
## [neat.data.scale_and_crop_image](3-neat_data.md#neat.data.scale_and_crop_image)

<!---Documatic-section-scale_and_crop_image-start--->
<!---Documatic-block-neat.data.scale_and_crop_image-start--->
<details>
	<summary><code>neat.data.scale_and_crop_image</code> code snippet</summary>

```python
def scale_and_crop_image(filename, scale, crop):
    image = Image.open(filename)
    (width, height) = (int(image.width / scale), int(image.height / scale))
    if scale != 1:
        im_resized = image.resize((width, height))
    else:
        im_resized = image
    image = np.asarray(im_resized)
    start_y = height // 2 - crop // 2
    start_x = width // 2 - crop // 2
    cropped_image = image[start_y:start_y + crop, start_x:start_x + crop]
    if len(cropped_image.shape) == 2:
        cropped_image = cropped_image.reshape((crop, crop, 1))
    cropped_image = np.transpose(cropped_image, (2, 0, 1))
    return cropped_image
```
</details>
<!---Documatic-block-neat.data.scale_and_crop_image-end--->
<!---Documatic-section-scale_and_crop_image-end--->

# #
<!---Documatic-section-neat.data.scale_and_crop_image-end--->

<!---Documatic-section-neat.data.transform_2d_points-start--->
## [neat.data.transform_2d_points](3-neat_data.md#neat.data.transform_2d_points)

<!---Documatic-section-transform_2d_points-start--->
<!---Documatic-block-neat.data.transform_2d_points-start--->
<details>
	<summary><code>neat.data.transform_2d_points</code> code snippet</summary>

```python
def transform_2d_points(xyz, r1, t1_x, t1_y, r2, t2_x, t2_y):
    xy1 = xyz.copy()
    xy1[:, 2] = 1
    (c, s) = (np.cos(r1), np.sin(r1))
    r1_to_world = np.matrix([[c, s, t1_x], [-s, c, t1_y], [0, 0, 1]])
    world = np.asarray(r1_to_world @ xy1.T)
    (c, s) = (np.cos(r2), np.sin(r2))
    r2_to_world = np.matrix([[c, s, t2_x], [-s, c, t2_y], [0, 0, 1]])
    world_to_r2 = np.linalg.inv(r2_to_world)
    out = np.asarray(world_to_r2 @ world).T
    out[:, 2] = xyz[:, 2]
    return out
```
</details>
<!---Documatic-block-neat.data.transform_2d_points-end--->
<!---Documatic-section-transform_2d_points-end--->

# #
<!---Documatic-section-neat.data.transform_2d_points-end--->

[_Documentation generated by Documatic_](https://www.documatic.com)